<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smash or Pass - Multiplayer Game</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <h1>üî• Smash or Pass üî•</h1>
            <p>Jeu de vote multijoueur - rejoignez une room et votez sur des images!</p>
            
            <div class="form-group">
                <input type="text" id="player-name" placeholder="Entrez votre nom" maxlength="20" required>
            </div>
            
            <div class="form-group">
                <input type="text" id="room-id" placeholder="ID de room (ou cr√©ez-en une)" maxlength="10">
            </div>
            
            <button id="join-room-btn" class="btn btn-primary">Rejoindre</button>
            <button id="create-room-btn" class="btn btn-secondary">Cr√©er une Room Al√©atoire</button>
        </div>

        <!-- Lobby Screen -->
        <div id="lobby-screen" class="screen">
            <div class="room-header">
                <h2>Room: <span id="current-room-id"></span></h2>
                <button id="leave-room-btn" class="btn btn-danger">Quitter la Room</button>
            </div>

            <div class="players-section">
                <h3>Joueurs dans la Room (<span id="player-count">0</span>)</h3>
                <div id="players-list"></div>
            </div>

            <div class="image-submission-section">
                <h3>Envoyez Vos Images</h3>
                <div class="upload-form">
                    <input type="file" id="image-upload" accept="image/*" style="display: none;">
                    
                    <!-- Step 1: Choose image -->
                    <div id="image-selection-step" class="upload-step active">
                        <button id="choose-image-btn" class="btn btn-primary">Choisir une Image</button>
                    </div>
                    
                    <!-- Step 2: Preview and add title -->
                    <div id="image-preview-step" class="upload-step" style="display: none;">
                        <div class="image-preview-container">
                            <img id="image-preview" src="" alt="Aper√ßu" class="image-preview">
                            <div class="preview-overlay">
                                <button id="change-image-btn" class="btn btn-secondary btn-small">Changer d'Image</button>
                            </div>
                        </div>
                        <div class="image-title-form">
                            <input type="text" id="character-name" placeholder="Nom du personnage/objet" maxlength="30" required>
                            <div class="upload-actions">
                                <button id="cancel-upload-btn" class="btn btn-secondary">Annuler</button>
                                <button id="confirm-upload-btn" class="btn btn-success">Confirmer l'Envoi</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="submission-status"></div>
            </div>

            <div class="ready-section">
                <button id="ready-btn" class="btn btn-success" disabled>Je suis Pr√™t!</button>
                <div id="ready-status"></div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <h2>Tour <span id="current-round">1</span> sur <span id="total-rounds">1</span></h2>
                <div class="timer-display">
                    <span class="timer-label">Temps:</span>
                    <span id="vote-timer" class="timer-value">0.0s</span>
                </div>
                <div id="game-status"></div>
            </div>

            <div class="image-display">
                <div id="character-info">
                    <h3 id="character-name-display"></h3>
                </div>
                <img id="current-image" src="" alt="Votez sur cette image">
            </div>

            <div class="voting-controls">
                <button id="pass-btn" class="btn btn-pass">‚ùå PASS</button>
                <button id="smash-btn" class="btn btn-smash">üíñ SMASH</button>
            </div>

            <div id="voting-status" class="voting-status"></div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="results-header">
                <h2>R√©sultats du Vote</h2>
                <div id="result-summary"></div>
            </div>

            <div class="vote-breakdown">
                <h3 id="result-character"></h3>
                <div class="result-display">
                    <div class="result-image-container">
                        <img id="result-image" src="" alt="Voted image">
                    </div>
                    <div class="vote-details">
                        <div id="vote-counts"></div>
                        <div id="player-votes"></div>
                    </div>
                </div>
            </div>

            <div id="results-controls">
                <div id="waiting-for-next"></div>
            </div>
        </div>

        <!-- Final Results Screen -->
        <div id="final-results-screen" class="screen">
            <div class="final-header">
                <h1>üéâ Jeu Termin√©! üéâ</h1>
            </div>

            <!-- Speed Stats Section -->
            <div id="speed-stats" class="speed-stats-section">
                <h3>‚ö° Statistiques de Vitesse</h3>
                
                <!-- Player Stats -->
                <div class="stats-category">
                    <h4>üíπ Joueurs</h4>
                    <div class="stats-grid">
                        <div class="stat-card fastest">
                            <div class="stat-icon">üèÜ</div>
                            <div class="stat-content">
                                <h5>Le Plus Rapide</h5>
                                <div id="fastest-player">-</div>
                            </div>
                        </div>
                        <div class="stat-card slowest">
                            <div class="stat-icon">üêå</div>
                            <div class="stat-content">
                                <h5>Le Plus Lent</h5>
                                <div id="slowest-player">-</div>
                            </div>
                        </div>
                    </div>
                    <div id="detailed-stats" class="detailed-stats"></div>
                </div>
                
                <!-- Image Stats -->
                <div class="stats-category">
                    <h4>üñºÔ∏è Personnages</h4>
                    <div class="stats-grid">
                        <div class="stat-card fastest-decision">
                            <div class="stat-icon">‚ö°</div>
                            <div class="stat-content">
                                <h5>D√©cision la Plus Rapide</h5>
                                <div id="fastest-decision">-</div>
                            </div>
                        </div>
                        <div class="stat-card slowest-decision">
                            <div class="stat-icon">ü§î</div>
                            <div class="stat-content">
                                <h5>D√©cision la Plus Lente</h5>
                                <div id="slowest-decision">-</div>
                            </div>
                        </div>
                    </div>
                    <div id="character-stats" class="detailed-stats"></div>
                </div>
            </div>

            <div id="final-results-list"></div>

            <div class="final-controls">
                <button id="play-again-btn" class="btn btn-primary">Rejouer</button>
                <button id="leave-game-btn" class="btn btn-secondary">Quitter le Jeu</button>
            </div>
        </div>
    </div>

    <!-- Notifications -->
    <div id="notifications"></div>

    <!-- Socket.io -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/client.js"></script>
</body>
</html>